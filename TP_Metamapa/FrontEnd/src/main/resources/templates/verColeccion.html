<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/base :: head (title=${coleccion.titulo})}"></head>
<body class="bg-pastel-blue-50 flex flex-col min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:text-white">

<div th:replace="~{layout/base :: header}"></div>

<main class="container mx-auto px-4 py-8 flex-grow">

    <div th:if="${successMessage}" class="p-4 mb-6 text-sm text-green-700 bg-green-100 rounded-lg shadow dark:bg-green-900 dark:text-green-200" role="alert">
        <span class="font-medium">¡Éxito!</span> <span th:text="${successMessage}"></span>
    </div>
    <div th:if="${errorMessage}" class="p-4 mb-6 text-sm text-red-700 bg-red-100 rounded-lg shadow dark:bg-red-900 dark:text-red-200" role="alert">
        <span class="font-medium">¡Error!</span> <span th:text="${errorMessage}"></span>
    </div>

    <div class="space-y-8">
        <div>
            <a th:href="@{/admin(tab='collections')}" class="text-sm text-pastel-blue-600 hover:underline dark:text-pastel-blue-400">&larr; Volver a Gestionar Colecciones</a>
            <h1 class="text-4xl font-bold text-pastel-blue-900 mt-2 dark:text-white" th:text="${coleccion.titulo}">Título</h1>
            <p class="text-lg text-gray-600 mt-1 dark:text-gray-300" th:text="${coleccion.descripcion}">Descripción</p>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md border border-pastel-blue-200 dark:bg-gray-800 dark:border-gray-700">
            <h3 class="text-xl font-bold text-pastel-blue-800 dark:text-pastel-blue-300">Detalles</h3>
            <div class="mt-4 text-sm space-y-2 text-gray-700 dark:text-gray-300">
                <p><span class="font-semibold">Consenso:</span> <span th:text="${coleccion.consenso} ?: 'Ninguno'"></span></p>

                <div th:if="${coleccion.criterio != null}">
                    <p class="font-semibold mt-4">Criterios de Pertenencia:</p>
                    <ul class="list-disc list-inside pl-4 space-y-1">
                        <li th:if="${coleccion.criterio.titulo}"><strong>Título:</strong> <span th:text="${coleccion.criterio.titulo}"></span></li>
                        <li th:if="${coleccion.criterio.categoria}"><strong>Categoría:</strong> <span th:text="${coleccion.criterio.categoria}"></span></li>
                    </ul>
                </div>
            </div>

            <div class="mt-8">
                <h2 class="text-2xl font-semibold text-pastel-blue-800 mb-4 dark:text-pastel-blue-300">Hechos (<span th:text="${coleccion.hechos.size()}">0</span>)</h2>
                <div class="space-y-4">
                    <div th:if="${coleccion.hechos.isEmpty()}" class="text-center text-gray-500 py-8 dark:text-gray-400">
                        <p>No hay hechos en esta colección.</p>
                    </div>
                    <div th:if="${!coleccion.hechos.isEmpty()}" th:each="hecho : ${coleccion.hechos}">
                        <div th:replace="~{fragments/hechoCard :: hechoCard(hecho=${hecho}, showOptions=false, showAdminActions = true, coleccionId=${coleccion.coleccionId})}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<div th:replace="~{layout/base :: footer}"></div>
<div th:replace="~{layout/base :: scripts}"></div>
</body>
</html>